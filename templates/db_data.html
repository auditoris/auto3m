{% extends "base.html" %}

{% block content %}
<h1 class="mb-4">ğŸ—„ï¸ DB ë°ì´í„° ì§ì ‘ ì¡°íšŒ</h1>

<p class="text-muted">ê° ë¡œë´‡ì´ ì €ì¥í•œ ìµœì‹  ë°ì´í„°ë¥¼ ì§ì ‘ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="card mb-4">
    <div class="card-header">
        ë¡œë´‡ ìƒíƒœ (ìµœê·¼ ì—…ë°ì´íŠ¸)
    </div>
    <div class="card-body">
        <p class="card-text"><strong>ì‹œì¥ ì¸í…”ë¦¬ì „ìŠ¤:</strong> {{ robot_status.mi_status }} (ë§ˆì§€ë§‰ ì‹¤í–‰: {{ robot_status.mi_last_run }})</p>
        <p class="card-text"><strong>ì£¼ì‹ ë¶„ì„:</strong> {{ robot_status.sa_status }} (ë§ˆì§€ë§‰ ì‹¤í–‰: {{ robot_status.sa_last_run }})</p>
        <p class="card-text"><strong>ëª¨ì˜ ê±°ë˜:</strong> {{ robot_status.tr_status }} (ë§ˆì§€ë§‰ ì‹¤í–‰: {{ robot_status.tr_last_run }})</p>
    </div>
</div>


<div class="accordion" id="dbAccordion">
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingNews">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNews" aria-expanded="false" aria-controls="collapseNews">
                ë‰´ìŠ¤ ë°ì´í„° (news_data í…Œì´ë¸”)
            </button>
        </h2>
        <div id="collapseNews" class="accordion-collapse collapse" aria-labelledby="headingNews" data-bs-parent="#dbAccordion">
            <div class="accordion-body">
                {% if news_data %}
                    {{ news_data | safe }}
                {% else %}
                    <p class="text-muted">ë‰´ìŠ¤ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingRecommendations">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRecommendations" aria-expanded="false" aria-controls="collapseRecommendations">
                ì¶”ì²œ ì¢…ëª© ë°ì´í„° (stock_recommendations í…Œì´ë¸”)
            </button>
        </h2>
        <div id="collapseRecommendations" class="accordion-collapse collapse" aria-labelledby="headingRecommendations" data-bs-parent="#dbAccordion">
            <div class="accordion-body">
                {% if recommendations %}
                    {{ recommendations | safe }}
                {% else %}
                    <p class="text-muted">ì¶”ì²œ ì¢…ëª© ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            </div>
        </div>
    </div>
    <div class="accordion-item">
        <h2 class="accordion-header" id="headingTradeLog">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTradeLog" aria-expanded="false" aria-controls="collapseTradeLog">
                ê±°ë˜ ë¡œê·¸ (trade_log í…Œì´ë¸”)
            </button>
        </h2>
        <div id="collapseTradeLog" class="accordion-collapse collapse" aria-labelledby="headingTradeLog" data-bs-parent="#dbAccordion">
            <div class="accordion-body">
                {% if trade_log %}
                    {{ trade_log | safe }}
                {% else %}
                    <p class="text-muted">ê±°ë˜ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}